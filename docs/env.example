# ============================================================================
# Prismateams - Umgebungsvariablen Konfiguration
# ============================================================================
# Kopieren Sie diese Datei zu .env und passen Sie die Werte an
# cp env.example .env
# nano .env
# ============================================================================

# ============================================================================
# Flask Basis-Konfiguration
# ============================================================================
SECRET_KEY=your-secret-key-here-change-this-in-production
FLASK_APP=app.py
FLASK_ENV=development

# ============================================================================
# Datenbank-Konfiguration
# ============================================================================
# Für SQLite (Standard/Entwicklung):
# DATABASE_URI=sqlite:///teamportal.db

# Für MySQL/MariaDB (Produktion empfohlen):
DATABASE_URI=mysql+pymysql://Prismateams:password@localhost/teamportal

# ============================================================================
# E-Mail-Konfiguration (SMTP für zentralen E-Mail-Client)
# ============================================================================
MAIL_SERVER=smtp.example.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=team@example.com
MAIL_PASSWORD=your-email-password
MAIL_DEFAULT_SENDER=team@example.com
MAIL_SENDER_NAME=Teamportal   # Optional: Anzeigename für Absender (z.B. "Technickteam Merian")

# IMAP-Konfiguration (für E-Mail-Abruf)
IMAP_SERVER=imap.example.com
IMAP_PORT=993
IMAP_USE_SSL=True

# E-Mail-Anhänge-Konfiguration
MAX_ATTACHMENT_SIZE=104857600  # Maximum Anhangsgröße in Bytes (Standard: 100MB)

# E-Mail HTML-Speicher-Konfiguration (optional)
# EMAIL_HTML_MAX_LENGTH=0  # 0 = unbegrenzt, setzen um HTML-Inhalt zu begrenzen
# EMAIL_TEXT_MAX_LENGTH=10000  # Maximale Text-Inhalt-Länge (10KB)
# EMAIL_HTML_STORAGE_TYPE=TEXT  # TEXT, MEDIUMTEXT, LONGTEXT (nur MySQL)

# ============================================================================
# Upload-Konfiguration
# ============================================================================
UPLOAD_FOLDER=uploads
MAX_CONTENT_LENGTH=104857600  # 100MB in Bytes

# ============================================================================
# Anwendungs-Konfiguration
# ============================================================================
# Hinweis: APP_NAME und APP_LOGO sind optional und werden nur als Fallback verwendet.
# Das Portal-Logo und der Portalsname können im Setup-Assistenten oder in den System-Einstellungen gesetzt werden.
APP_NAME=Prismateams  # Optional: Fallback für Portalsname
APP_LOGO=static/img/logo.png  # Optional: Fallback für Portal-Logo (logo.png wird automatisch verwendet)
TIMEZONE=Europe/Berlin

# ============================================================================
# Push-Benachrichtigungen (VAPID)
# ============================================================================
# Generieren Sie diese mit: python scripts/generate_vapid_keys.py
# Diese Keys sind für server-basierte Push-Benachrichtigungen erforderlich
# Das System verwendet Web Push API mit VAPID-Authentifizierung
# 
# Wenn gesetzt, werden diese aus der .env geladen. Alternativ kann eine Datei
# "vapid_keys.json" im Projektverzeichnis liegen, z.B.:
# {"publicKey":"<BASE64URL-KEY>", "privateKey":"<BASE64URL-KEY>"}
# 
# Private Key unterstützt folgende Formate: base64url-RAW (32 Byte), base64url DER, oder PEM
VAPID_PUBLIC_KEY=your-vapid-public-key-here
VAPID_PRIVATE_KEY=your-vapid-private-key-here

# ============================================================================
# Verschlüsselungs-Keys
# ============================================================================
# Generieren Sie diese mit: python scripts/generate_encryption_keys.py
# Diese Keys werden verwendet, um sensible Daten zu verschlüsseln:
# - CREDENTIAL_ENCRYPTION_KEY: Verschlüsselt Passwörter im Credentials-Modul
# - MUSIC_ENCRYPTION_KEY: Verschlüsselt OAuth-Tokens im Music-Modul
# 
# ⚠️ WICHTIG: Wenn Sie die Keys ändern, können verschlüsselte Daten nicht mehr entschlüsselt werden!
# Bewahren Sie die Keys sicher auf und teilen Sie sie niemals öffentlich!
CREDENTIAL_ENCRYPTION_KEY=your-credential-encryption-key-here
MUSIC_ENCRYPTION_KEY=your-music-encryption-key-here

# ============================================================================
# Redis-Konfiguration (optional, erforderlich für Multi-Worker Gunicorn-Setups)
# ============================================================================
# SocketIO benötigt Redis als Message Queue, wenn mehrere Gunicorn-Worker verwendet werden
# Ohne Redis funktionieren SocketIO-Events (Echtzeit-Updates) nur mit einem Worker korrekt
# 
# Installation:
#   Ubuntu/Debian: sudo apt-get install redis-server
#   macOS: brew install redis
#   Windows: Siehe Redis-Dokumentation
# 
# Für Produktion mit mehreren Workern wird Redis dringend empfohlen!
REDIS_ENABLED=False
# REDIS_URL=redis://localhost:6379/0  # Redis Verbindungs-URL (Standard: localhost:6379)

# ============================================================================
# OnlyOffice-Konfiguration (optional)
# ============================================================================
# Setzen Sie ONLYOFFICE_ENABLED=True, wenn OnlyOffice Document Server installiert ist
# OnlyOffice ermöglicht Online-Bearbeitung von Office-Dokumenten (Word, Excel, PowerPoint)
# 
# Installation: Siehe INSTALLATION.md für Docker-Installation
ONLYOFFICE_ENABLED=False
# ONLYOFFICE_DOCUMENT_SERVER_URL=/onlyoffice  # Pfad zu OnlyOffice Document Server (normalerweise /onlyoffice via Nginx)
# ONLYOFFICE_SECRET_KEY=your-secret-key-here  # Optional: Secret Key für sichere Callback-Signierung (JWT)
# ONLYOFFICE_PUBLIC_URL=  # Optional: Öffentliche URL für Flask-App (erforderlich wenn OnlyOffice auf anderem Server läuft)

# ============================================================================
# Excalidraw-Konfiguration (optional)
# ============================================================================
# Setzen Sie EXCALIDRAW_ENABLED=True, wenn Excalidraw installiert ist
# Excalidraw ermöglicht kollaborative Zeichnungen im Canvas-Modul
# 
# Installation: Siehe INSTALLATION.md für Docker-Installation
EXCALIDRAW_ENABLED=False
# EXCALIDRAW_URL=/excalidraw  # Pfad zu Excalidraw Client (normalerweise /excalidraw via Nginx)
# EXCALIDRAW_ROOM_URL=/excalidraw-room  # Pfad zu Excalidraw Room Server (normalerweise /excalidraw-room via Nginx)
# EXCALIDRAW_PUBLIC_URL=  # Optional: Öffentliche URL für Flask-App (erforderlich wenn Excalidraw auf anderem Server läuft)

# ============================================================================
# Produktions-Einstellungen (für Produktion auskommentieren)
# ============================================================================
# SESSION_COOKIE_SECURE=True    # Erforderlich für HTTPS
# SESSION_COOKIE_HTTPONLY=True  # Schutz gegen XSS-Angriffe
# SESSION_COOKIE_SAMESITE=Lax   # CSRF-Schutz
