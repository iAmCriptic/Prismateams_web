{% extends "base.html" %}

{% block title %}{{ _('wiki.history.page_title', title=page.title) }}{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <h1><i class="bi bi-clock-history"></i> {{ _('wiki.history.heading') }}</h1>
        <p class="text-muted">
            <a href="{{ url_for('wiki.view', slug=page.slug) }}">{{ page.title }}</a>
        </p>
    </div>
    <div class="col-auto">
        <a href="{{ url_for('wiki.view', slug=page.slug) }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> {{ _('wiki.history.buttons.back') }}
        </a>
    </div>
</div>

{% if versions %}
<div class="list-group">
    {% for version in versions %}
    <div class="list-group-item">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">
                {{ _('wiki.index.card.version', number=version.version_number) }}
                {% if version.version_number == page.version_number %}
                <span class="badge bg-primary">{{ _('wiki.history.badge_current') }}</span>
                {% endif %}
            </h5>
            <small>{{ version.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
        </div>
        <p class="mb-1">
            <i class="bi bi-person"></i> {{ version.creator.full_name }}
        </p>
        <div class="mt-2">
            <a href="{{ url_for('wiki.view', slug=page.slug) }}" class="btn btn-sm btn-outline-primary">
                <i class="bi bi-eye"></i> {{ _('wiki.history.buttons.view_current') }}
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-info">
    <i class="bi bi-info-circle"></i>
    {{ _('wiki.history.empty') }}
</div>
{% endif %}
{% endblock %}


